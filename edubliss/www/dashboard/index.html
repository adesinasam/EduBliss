{% extends "templates/layout.html" %}

{% block title %}
{{ _("Dasboard") }}
{% endblock %}

{% block headnav_link %}
    {% include "templates/includes/headnav/edu_headnav2.html" %}
{% endblock %}

{% block content %}
    <main class="grow content pt-5" id="content" role="content">
     <!-- begin: container -->
     <div class="container-fixed" id="content_container">
     </div>
     <!-- end: container -->
     <!-- begin: container -->
     <div class="container-fixed">
      <div class="flex flex-wrap items-center lg:items-end justify-between gap-5 pb-7.5">
       <div class="flex flex-col justify-center gap-2">
        <h1 class="text-xl font-semibold leading-none text-gray-900">
         Dashboard
        </h1>
        <div class="flex items-center gap-2 text-sm font-medium text-gray-600">
         Hello {{ current_user.first_name }}
        </div>
       </div>
       <div class="flex items-center gap-2.5">
        <a class="btn btn-sm btn-light" href="/me">
         View Profile
        </a>
       </div>
      </div>
     </div>
     <!-- end: container -->

    {% if "Academics User" in user_roles %}
     <!-- begin: container -->
     <div class="container-fixed">
      <div class="grid gap-5 lg:gap-7.5">
       <!-- begin: grid -->
       <div class="grid lg:grid-cols-3 gap-y-5 lg:gap-7.5 items-stretch">
        <div class="lg:col-span-1">
         <div class="grid grid-cols-2 gap-5 lg:gap-7.5 h-full items-stretch">
          <style>
           .channel-stats-bg {background-image: url('/assets/edubliss/dist/media/images/2600x1600/bg-3.png');} 
           .dark .channel-stats-bg {background-image: url('/assets/edubliss/dist/media/images/2600x1600/bg-3-dark.png');}
          </style>
          <div class="card flex-col justify-between gap-6 h-full bg-cover bg-[right_top_-1.7rem] bg-no-repeat channel-stats-bg">
           <img alt="" class="w-7 mt-4 ms-5" src="assets/edubliss/dist/media/images/icons/team.png"/>
           <div class="flex flex-col gap-1 pb-4 px-5">
            <a href="/students/list">
            <span class="text-3xl font-semibold text-gray-900">
             {{ student_count }}
            </span>
            <span class="text-2sm font-medium text-gray-600">
             Students
            </span>
            </a>
           </div>
          </div>
          <div class="card flex-col justify-between gap-6 h-full bg-cover bg-[right_top_-1.7rem] bg-no-repeat channel-stats-bg">
           <img alt="" class="w-7 mt-4 ms-5" src="assets/edubliss/dist/media/images/icons/user-circle.svg"/>
           <div class="flex flex-col gap-1 pb-4 px-5">
            <span class="text-3xl font-semibold text-gray-900">
             {{teacher_count}}
            </span>
            <span class="text-2sm font-medium text-gray-600">
             Teachers
            </span>
           </div>
          </div>
          <div class="card flex-col justify-between gap-6 h-full bg-cover bg-[right_top_-1.7rem] bg-no-repeat channel-stats-bg">
           <img alt="" class="w-7 mt-4 ms-5" src="assets/edubliss/dist/media/images/icons/time.png"/>
           <div class="flex flex-col gap-1 pb-4 px-5">
            <span class="text-3xl font-semibold text-gray-900">
             1
            </span>
            <span class="text-2sm font-medium text-gray-600">
             Upcoming Event
            </span>
           </div>
          </div>
          <div class="card flex-col justify-between gap-6 h-full bg-cover bg-[right_top_-1.7rem] bg-no-repeat channel-stats-bg">
           <img alt="" class="dark:hidden w-7 mt-4 ms-5" src="assets/edubliss/dist/media/images/icons/police-id.png"/>
           <img alt="" class="light:hidden w-7 mt-4 ms-5" src="assets/edubliss/dist/media/images/icons/police-id.png"/>
           <div class="flex flex-col gap-1 pb-4 px-5">
            <span class="text-3xl font-semibold text-gray-900">
             200
            </span>
            <span class="text-2sm font-medium text-gray-600">
             New Admissions
            </span>
           </div>
          </div>
         </div>
        </div>
        <div class="lg:col-span-2">
         <style>
          .entry-callout-bg {background-image: url('/assets/edubliss/dist/media/images/2600x1600/2.png');} 
          .dark .entry-callout-bg {background-image: url('/assets/edubliss/dist/media/images/2600x1600/2-dark.png');}
         </style>
         <div class="card h-full h-full">
          <div class="card-body p-10 bg-[length:80%] [background-position:175%_25%] bg-no-repeat entry-callout-bg">
           <div class="flex flex-col justify-center gap-4">
            <div class="flex -space-x-2">
             <div id="clock" class="flex clock hover:z-5 relative"><b>00:00:00</b></div>
            </div>
            <h2 class="text-1.5xl font-semibold text-gray-900">
             Welcome to 
             <br/>
             <a class="link" href="#">
              Maryland Schools
             </a>
            </h2>
            <p class="text-sm font-medium text-gray-700 leading-5.5">
             We are proud to carry you along in our daily
             <br/>
             engagements. Enjoy the best digital 
             <br/>
              and efficient services.
            </p>
           </div>
          </div>
          <div class="card-footer justify-center">
           <a class="btn btn-link" href="/lms">
            Go to LMS
           </a>
          </div>
         </div>
        </div>
       </div>
       <!-- end: grid -->
       <!-- begin: grid -->
       <div class="grid lg:grid-cols-3 gap-5 lg:gap-7.5 items-stretch">
        <div class="lg:col-span-1">
         <div class="card h-full">
          <div class="card-header">
           <h3 class="card-title">
            Academics and LMS Overview
           </h3>
          </div>
          <div class="card-body flex flex-col gap-4 p-5 lg:p-7.5 lg:pt-4">
           <div class="grid gap-3">
            <div class="flex items-center justify-between flex-wrap gap-2">
             <div class="flex items-center gap-1.5">
              <i class="ki-filled ki-teacher text-base text-info">
              </i>
              <span class="text-sm font-medium text-gray-800">
               Classes
              </span>
             </div>
             <div class="flex items-center text-sm font-medium text-gray-800 gap-6">
              <span class="lg:text-right">
               7
              </span>
             </div>
            </div>
            <div class="flex items-center justify-between flex-wrap gap-2">
             <div class="flex items-center gap-1.5">
              <i class="ki-filled ki-clipboard text-base text-warning">
              </i>
              <span class="text-sm font-medium text-gray-800">
               Section
              </span>
             </div>
             <div class="flex items-center text-sm font-medium text-gray-800 gap-6">
              <span class="lg:text-right">
               5
              </span>
             </div>
            </div>
           <div class="border-b border-gray-300">
           </div>
            <div class="flex items-center justify-between flex-wrap gap-2">
             <div class="flex items-center gap-1.5">
              <i class="ki-filled ki-book text-base text-primary">
              </i>
              <span class="text-sm font-medium text-gray-800">
               Subjects
              </span>
             </div>
             <div class="flex items-center text-sm font-medium text-gray-800 gap-6">
              <span class="lg:text-right">
               13
              </span>
             </div>
            </div>
            <div class="flex items-center justify-between flex-wrap gap-2">
             <div class="flex items-center gap-1.5">
              <i class="ki-filled ki-note text-base text-danger">
              </i>
              <span class="text-sm font-medium text-gray-800">
               Courses
              </span>
             </div>
             <div class="flex items-center text-sm font-medium text-gray-800 gap-6">
              <span class="lg:text-right">
               {{course_count}}
              </span>
             </div>
            </div>
            <div class="flex items-center justify-between flex-wrap gap-2">
             <div class="flex items-center gap-1.5">
              <i class="ki-filled ki-award text-base text-success">
              </i>
              <span class="text-sm font-medium text-gray-800">
               Assessment
              </span>
             </div>
             <div class="flex items-center text-sm font-medium text-gray-800 gap-6">
              <span class="lg:text-right">
               20
              </span>
             </div>
            </div>
          </div>
          </div>
         </div>
        </div>
        <div class="lg:col-span-2">
         <div class="card h-full">
          <div class="card-header">
           <h3 class="card-title">
            New Admissions
           </h3>
           <div class="flex gap-5">
            <select class="select select-sm w-28" name="select">
             <!--<option value="1">
              1 month
             </option>
             <option value="2">
              3 month
             </option>
             <option value="3">
              6 month
             </option>
             <option selected="" value="4">
              12 month
             </option> -->
            </select>
           </div>
          </div>
          <div class="card-body flex flex-col justify-end items-stretch grow px-3 py-1">
           <div id="earnings_chart">
           </div>
          </div>
         </div>
        </div>
       </div>
       <!-- end: grid -->
       <!-- begin: grid -->
       <div class="grid lg:grid-cols-3 gap-5 lg:gap-7.5 items-stretch">
        <div class="lg:col-span-1">
         <div class="card h-full">
         <div class="card-body px-10 py-7.5 lg:pr-12.5">
          <div class="flex flex-wrap md:flex-nowrap items-center gap-6 md:gap-10">
           <div class="flex flex-col items-start gap-3">
            <h2 class="text-1.5xl font-semibold text-gray-900">
             Contact Support
            </h2>
            <p class="text-sm font-medium text-gray-700 leading-5.5 mb-2.5">
             Need assistance? Contact our support team for prompt, personalized help your queries &amp; concerns.
            </p>
           </div>
           <img alt="image" class="dark:hidden max-h-[150px]" src="assets/edubliss/dist/media/illustrations/31.svg"/>
           <img alt="image" class="light:hidden max-h-[150px]" src="assets/edubliss/dist/media/illustrations/31-dark.svg"/>
          </div>
         </div>
         <div class="card-footer justify-center">
          <a class="btn btn-link" href="/issues">
           Contact Support
          </a>
         </div>
        </div>
        </div>
        <div class="lg:col-span-2">
         <div class="grid">
         <div class="card card-grid min-w-full">
          <div class="card-header py-5 flex-wrap">
           <h3 class="card-title">
            Students
           </h3>
            <!--<div class="flex gap-6">
            <div class="relative">
             <i class="ki-filled ki-magnifier leading-none text-md text-gray-500 absolute top-1/2 left-0 -translate-y-1/2 ml-3">
             </i>
             <input class="input input-sm pl-8" placeholder="Search Members" type="text"/>
            </div>
            <label class="switch switch-sm">
             <input class="order-2" name="check" type="checkbox" value="1"/>
             <span class="switch-label order-1">
              Active Users
             </span>
            </label>
           </div> -->
          </div>
          <div class="card-body">
           <div data-datatable="true" data-datatable-page-size="5">
            <div class="scrollable-x-auto">
             <table class="table table-auto table-border" data-datatable-table="true">
              <thead>
               <tr>
                <th class="min-w-[250px]">
                 <span class="sort asc">
                  <span class="sort-label">
                   Student Name
                  </span>
                  <span class="sort-icon">
                  </span>
                 </span>
                </th>
                <th class="min-w-[120px]">
                 <span class="sort">
                  <span class="sort-label">
                   Student ID
                  </span>
                  <span class="sort-icon">
                  </span>
                 </span>
                </th>
                <th class="min-w-[120px]">
                 <span class="sort">
                  <span class="sort-label">
                   Status
                  </span>
                  <span class="sort-icon">
                  </span>
                 </span>
                </th>
                <th class="min-w-[160px]">
                 <span class="sort">
                  <span class="sort-label">
                   Joined Date
                  </span>
                  <span class="sort-icon">
                  </span>
                 </span>
                </th>
               </tr>
              </thead>
              <tbody>
                {% for student in students %}
               <tr>
                <td>
                 <div class="flex items-center gap-2.5">
                  <div class="">
                   <img class="h-9 rounded-full" src="{% if student.image  %}{{student.image}}{% else %}assets/edubliss/dist/media/avatars/blank.png{% endif %}"/>
                  </div>
                  <div class="flex flex-col gap-0.5">
                   <a class="leading-none font-semibold text-sm text-gray-900 hover:text-primary" href="/students/profile/{{ student.name }}">
                    {{ student.student_name }}
                   <span class="text-2sm font-medium text-gray-600 hover:text-primary-active">
                    {{ student.student_email_id }}
                   </span>
                   </a>
                  </div>
                 </div>
                </td>
                <td>
                 <div class="flex items-center gap-1.5">
                  <span class="leading-none text-gray-700">
                   {{ student.name }}
                  </span>
                 </div>
                </td>
                <td>
                  {% if student.enabled == 1 %}
                 <span class="badge badge-pill badge-outline badge-success gap-1 items-center">
                  <span class="badge badge-dot size-1.5 badge-success">
                  </span>
                    Active
                 </span>
                  {% else %}
                 <span class="badge badge-pill badge-outline badge-danger gap-1 items-center">
                  <span class="badge badge-dot size-1.5 badge-danger">
                  </span>
                    Disabled
                 </span>
                  {% endif %}
                </td>
                <td>
                 {{ student.joining_date }}
                </td>
               </tr>
               {% endfor %}
              </tbody>
             </table>
            </div>
            <div class="card-footer justify-center md:justify-between flex-col md:flex-row gap-5 text-gray-600 text-2sm font-medium">
             <div class="flex items-center gap-2 order-2 md:order-1">
              Show
              <select class="select select-sm w-16" data-datatable-size="true" name="perpage1">
              </select>
              per page
             </div>
             <div class="flex items-center gap-4 order-1 md:order-2">
              <span data-datatable-info="true">
              </span>
              <div class="pagination" data-datatable-pagination="true">
              </div>
             </div>
            </div>
           </div>
          </div>
         </div>
        </div>
        </div>
       </div>
       <!-- end: grid -->
       <!-- begin: grid -->
       <div class="card card-grid min-w-full">
        <div class="card-header">
         <h3 class="card-title">
          Billing and Invoicing
         </h3>
          <!--<button class="btn btn-light btn-sm">
          <i class="ki-filled ki-exit-down">
          </i>
          Download PDF
         </button> -->
        </div>
        <div class="card-body">
         <div data-datatable="true" data-datatable-page-size="10">
          <div class="scrollable-x-auto">
           <table class="table table-border" data-datatable-table="true">
            <thead>
             <tr>
              <th class="min-w-[200px]">
               <span class="sort">
                <span class="sort-label">
                 Title
                </span>
                <span class="sort-icon">
                </span>
               </span>
              </th>
              <th class="w-[170px]">
               <span class="sort">
                <span class="sort-label">
                 Status
                </span>
                <span class="sort-icon">
                </span>
               </span>
              </th>
              <th class="w-[170px]">
               <span class="sort">
                <span class="sort-label">
                 Date
                </span>
                <span class="sort-icon">
                </span>
               </span>
              </th>
              <th class="w-[170px]">
               <span class="sort">
                <span class="sort-label">
                 Grand Total
                </span>
                <span class="sort-icon">
                </span>
               </span>
              </th>
              <th class="w-[170px]">
               <span class="sort">
                <span class="sort-label">
                 Outstanding
                </span>
                <span class="sort-icon">
                </span>
               </span>
              </th>
              <th class="w-[100px]">
              </th>
             </tr>
            </thead>
            <tbody>
            {% for invoice in sales_invoices %}
             <tr>
              <td>
               <a class="leading-none font-semibold text-sm text-gray-900 hover:text-primary" href="#">        
               {{ invoice.title }}
               </a>
              </td>
              <td>
               {% if invoice.status == 'Draft' %}
               <div class="badge badge-sm badge-info badge-outline">
                {% elif invoice.status == 'Overdue' %}
               <div class="badge badge-sm badge-danger badge-outline">
                {% elif invoice.status == 'Cancelled' %}
               <div class="badge badge-sm badge-danger badge-outline">
                {% elif invoice.status == 'Unpaid' %}
               <div class="badge badge-sm badge-warning badge-outline">
                {% elif invoice.status == 'Partly Paid' %}
               <div class="badge badge-sm badge-warning badge-outline">
                {% elif invoice.status == 'Paid' %}
               <div class="badge badge-sm badge-success badge-outline">
                {% elif invoice.status == 'Return' %}
               <div class="badge badge-sm badge-dark badge-outline">
                {% else %}
               <div class="badge badge-sm badge-primary badge-outline">
                {% endif %}
                {{ invoice.status }}
               </div>
              </td>
              <td>
               {{ invoice.posting_date }}
              </td>
              <td>
               {{ frappe.format(invoice.grand_total, {'fieldtype': 'Currency'}) }}
              </td>
              <td>
               {{ frappe.format(invoice.outstanding_amount, {'fieldtype': 'Currency'}) }}
              </td>
              <td class="text-center">
               <a class="btn btn-link" href="/printview?doctype=Sales%20Invoice&name={{ invoice.name }}">
                {{ invoice.name }}
               </a>
              </td>
             </tr>
             {% endfor %}
            </tbody>
           </table>
          </div>
          <div class="card-footer justify-center md:justify-between flex-col md:flex-row gap-5 text-gray-600 text-2sm font-medium">
           <div class="flex items-center gap-2 order-2 md:order-1">
            Show
            <select class="select select-sm w-16" data-datatable-size="true" name="perpage2">
            </select>
            per page
           </div>
           <div class="flex items-center gap-4 order-1 md:order-2">
            <span data-datatable-info="true">
            </span>
            <div class="pagination" data-datatable-pagination="true">
            </div>
           </div>
          </div>
         </div>
        </div>
       </div>
       <!-- end: grid -->
      </div>
     </div>
     <!-- end: container -->
    {% elif current_user.role_profile_name == 'MPIS Parent' or "Parent" in user_roles %}
     <!-- begin: container -->
     <div class="container-fixed">
      <div class="grid gap-5 lg:gap-7.5">
       <!-- begin: grid -->
       <div class="grid lg:grid-cols-3 gap-y-5 lg:gap-7.5 items-stretch">
        <div class="lg:col-span-1">
         <div class="card">
          <div class="card-header card-rounded-t flex justify-end items-start relative p-0 bg-no-repeat bg-cover bg-center h-[120px]" style="background-image: url('assets/edubliss/dist/media/images/600x600/3.jpg')">
          </div>
          <div class="card-body pt-0">
           <div class="flex justify-center transform -translate-y-1/2">
            <div class="flex items-center justify-center relative text-2.5xl text-primary size-20 ring-1 ring-primary-clarity bg-primary-light rounded-full">
             {{ abbr }}
             <div class="flex size-2.5 bg-gray-400 rounded-full ring-2 ring-light absolute bottom-0.5 left-16 transform -translate-y-1/2">
             </div>
            </div>
           </div>
           <div class="flex items-center justify-center gap-1.5 mb-px -mt-7.5">
            <div class="hover:text-primary-active text-base text-sm leading-5 font-medium text-gray-900" href="#">
             {{current_user.full_name}}
            </div>
            <svg class="text-primary" fill="none" height="16" viewbox="0 0 15 16" width="15" xmlns="http://www.w3.org/2000/svg">
             <path d="M14.5425 6.89749L13.5 5.83999C13.4273 5.76877 13.3699 5.6835 13.3312 5.58937C13.2925 5.49525 13.2734 5.39424 13.275 5.29249V3.79249C13.274 3.58699 13.2324 3.38371 13.1527 3.19432C13.0729 3.00494 12.9565 2.83318 12.8101 2.68892C12.6638 2.54466 12.4904 2.43073 12.2998 2.35369C12.1093 2.27665 11.9055 2.23801 11.7 2.23999H10.2C10.0982 2.24159 9.99722 2.22247 9.9031 2.18378C9.80898 2.1451 9.72371 2.08767 9.65249 2.01499L8.60249 0.957487C8.30998 0.665289 7.91344 0.50116 7.49999 0.50116C7.08654 0.50116 6.68999 0.665289 6.39749 0.957487L5.33999 1.99999C5.26876 2.07267 5.1835 2.1301 5.08937 2.16879C4.99525 2.20747 4.89424 2.22659 4.79249 2.22499H3.29249C3.08699 2.22597 2.88371 2.26754 2.69432 2.34731C2.50494 2.42709 2.33318 2.54349 2.18892 2.68985C2.04466 2.8362 1.93073 3.00961 1.85369 3.20013C1.77665 3.39064 1.73801 3.5945 1.73999 3.79999V5.29999C1.74159 5.40174 1.72247 5.50275 1.68378 5.59687C1.6451 5.691 1.58767 5.77627 1.51499 5.84749L0.457487 6.89749C0.165289 7.19 0.00115967 7.58654 0.00115967 7.99999C0.00115967 8.41344 0.165289 8.80998 0.457487 9.10249L1.49999 10.16C1.57267 10.2312 1.6301 10.3165 1.66878 10.4106C1.70747 10.5047 1.72659 10.6057 1.72499 10.7075V12.2075C1.72597 12.413 1.76754 12.6163 1.84731 12.8056C1.92709 12.995 2.04349 13.1668 2.18985 13.3111C2.3362 13.4553 2.50961 13.5692 2.70013 13.6463C2.89064 13.7233 3.0945 13.762 3.29999 13.76H4.79999C4.90174 13.7584 5.00275 13.7775 5.09687 13.8162C5.191 13.8549 5.27627 13.9123 5.34749 13.985L6.40499 15.0425C6.69749 15.3347 7.09404 15.4988 7.50749 15.4988C7.92094 15.4988 8.31748 15.3347 8.60999 15.0425L9.65999 14C9.73121 13.9273 9.81647 13.8699 9.9106 13.8312C10.0047 13.7925 10.1057 13.7734 10.2075 13.775H11.7075C12.1212 13.775 12.518 13.6106 12.8106 13.3181C13.1031 13.0255 13.2675 12.6287 13.2675 12.215V10.715C13.2659 10.6132 13.285 10.5122 13.3237 10.4181C13.3624 10.324 13.4198 10.2387 13.4925 10.1675L14.55 9.10999C14.6953 8.96452 14.8104 8.79176 14.8887 8.60164C14.9671 8.41152 15.007 8.20779 15.0063 8.00218C15.0056 7.79656 14.9643 7.59311 14.8847 7.40353C14.8051 7.21394 14.6888 7.04197 14.5425 6.89749ZM10.635 6.64999L6.95249 10.25C6.90055 10.3026 6.83864 10.3443 6.77038 10.3726C6.70212 10.4009 6.62889 10.4153 6.55499 10.415C6.48062 10.4139 6.40719 10.3982 6.33896 10.3685C6.27073 10.3389 6.20905 10.2961 6.15749 10.2425L4.37999 8.44249C4.32532 8.39044 4.28169 8.32793 4.25169 8.25867C4.22169 8.18941 4.20593 8.11482 4.20536 8.03934C4.20479 7.96387 4.21941 7.88905 4.24836 7.81934C4.27731 7.74964 4.31999 7.68647 4.37387 7.63361C4.42774 7.58074 4.4917 7.53926 4.56194 7.51163C4.63218 7.484 4.70726 7.47079 4.78271 7.47278C4.85816 7.47478 4.93244 7.49194 5.00112 7.52324C5.0698 7.55454 5.13148 7.59935 5.18249 7.65499L6.56249 9.05749L9.84749 5.84749C9.95296 5.74215 10.0959 5.68298 10.245 5.68298C10.394 5.68298 10.537 5.74215 10.6425 5.84749C10.6953 5.90034 10.737 5.96318 10.7653 6.03234C10.7935 6.1015 10.8077 6.1756 10.807 6.25031C10.8063 6.32502 10.7908 6.39884 10.7612 6.46746C10.7317 6.53608 10.6888 6.59813 10.635 6.64999Z" fill="currentColor">
             </path>
            </svg>
           </div>
           <div class="flex flex-wrap justify-center items-center gap-3.5 mb-7">
            <a class="text-xs text-gray-700 hover:text-primary-active" href="malito:{{current_user.name}}">
             {{current_user.name}}
            </a>
           </div>
            <!--<div class="flex items-center justify-center flex-wrap gap-2 lg:gap-5 mb-3">
            <div class="grid grid-cols-1 gap-1.5 border-[0.5px] border-dashed border-gray-400 rounded-md px-2.5 py-2 shrink-0 max-w-auto">
             <span class="text-gray-900 text-sm leading-none font-medium">
              N120,000.00
             </span>
             <span class="text-gray-700 text-xs">
              Unpaid
             </span>
            </div>
            <div class="grid grid-cols-1 gap-1.5 border-[0.5px] border-dashed border-gray-400 rounded-md px-2.5 py-2 shrink-0 max-w-auto">
             <span class="text-gray-900 text-sm leading-none font-medium">
              2
             </span>
             <span class="text-gray-700 text-xs">
              Students
             </span>
            </div>
           </div> -->
          </div>
          <div class="card-footer justify-center">
            {% if parents: %}
           <a class="btn btn-link" href="/parents/profile/{{ parents.name }}">
            View Profile
           </a>
           {% else %}
           <div class="btn btn-link" href="/parents/profile/{{ parents.name }}">
            View Profile
           </div>
           {% endif %}
          </div>
         </div>
        </div>
        <div class="lg:col-span-2">
         <style>
          .entry-callout-bg {background-image: url('/assets/edubliss/dist/media/images/2600x1600/2.png');}
          .dark .entry-callout-bg {background-image: url('/assets/edubliss/dist/media/images/2600x1600/2-dark.png');}
         </style>
         <div class="card h-full h-full">
          <div class="card-body p-10 bg-[length:80%] [background-position:175%_25%] bg-no-repeat entry-callout-bg">
           <div class="flex flex-col justify-center gap-4">
            <div class="flex -space-x-2">
             <div id="clock" class="flex clock hover:z-5 relative"><b>00:00:00</b></div>
            </div>
            <h2 class="text-1.5xl font-semibold text-gray-900">
             Welcome to 
             <br/>
             <a class="link" href="#">
              Maryland Schools
             </a>
            </h2>
            <p class="text-sm font-medium text-gray-700 leading-5.5">
             We are proud to carry you along in our daily
             <br/>
             engagements. Enjoy the best digital 
             <br/>
              and efficient services.
            </p>
           </div>
          </div>
          <div class="card-footer justify-center">
           <div class="btn btn-link" href="/lms">
            Learn more
           </div>
          </div>
         </div>
        </div>
       </div>
       <!-- end: grid -->
       <!-- begin: grid -->
       <div class="grid lg:grid-cols-3 gap-5 lg:gap-7.5 items-stretch">
        <div class="lg:col-span-1">
        </div>
        <div class="lg:col-span-2">
         <div class="grid">
        </div>
        </div>
       </div>
       <!-- end: grid -->
      </div>
     </div>
     <!-- end: container -->
     <!-- Container -->
     <div class="container-fixed">
      <div class="grid gap-5 lg:gap-7.5">
      <div class="grid grid-cols-1 lg:grid-cols-2 xl:grid-cols-3 gap-5 lg:gap-7.5">
       <div class="card p-5 lg:p-7.5 lg:pt-7">
        <div class="flex flex-col gap-4">
         <div class="flex items-center justify-between gap-2">
          <i class="ki-filled ki-badge text-2xl link">
          </i>
          <div class="menu" data-menu="true">
           <div class="menu-item" data-menu-item-offset="0, 10px" data-menu-item-placement="bottom-end" data-menu-item-toggle="dropdown" data-menu-item-trigger="click|lg:click">
            <button class="menu-toggle btn btn-sm btn-icon btn-light btn-clear">
             <i class="ki-filled ki-dots-vertical">
             </i>
            </button>
           </div>
          </div>
         </div>
         <div class="flex flex-col gap-3">
          <div class="text-base font-semibold leading-none text-gray-900 hover:text-primary-active" href="/parents/profile/{{ parents.name }}">
           Personal info
          </div>
          <span class="text-2sm font-medium text-gray-600 leading-5">
           <!-- We're open to partnerships, guest posts, promo bannersand more. -->
          </span>
         </div>
        </div>
       </div>
       <div class="card p-5 lg:p-7.5 lg:pt-7">
        <div class="flex flex-col gap-4">
         <div class="flex items-center justify-between gap-2">
          <i class="ki-filled ki-cheque text-2xl link">
          </i>
         </div>
         <div class="flex flex-col gap-3">
          <div class="text-base font-semibold leading-none text-gray-900 hover:text-primary-active" href="/parents/profile/{{ parents.name }}">
           Billing &amp; Payments
          </div>
          <span class="text-2sm font-medium text-gray-600 leading-5">
           Simplify payments today with secure, user-friendly transaction processes.
          </span>
         </div>
        </div>
       </div>
       <div class="card p-5 lg:p-7.5 lg:pt-7">
        <div class="flex flex-col gap-4">
         <div class="flex items-center justify-between gap-2">
          <i class="ki-filled ki-notification-on text-2xl link">
          </i>
          <div class="menu" data-menu="true">
           <div class="menu-item" data-menu-item-offset="0, 10px" data-menu-item-placement="bottom-end" data-menu-item-toggle="dropdown" data-menu-item-trigger="click|lg:click">
            <button class="menu-toggle btn btn-sm btn-icon btn-light btn-clear">
             <i class="ki-filled ki-dots-vertical">
             </i>
            </button>
            <div class="menu-dropdown menu-default w-full max-w-[200px]" data-menu-dismiss="true">
             <div class="menu-item">
              <div class="menu-link" href="html/demo1/account/home/settings-enterprise.html">
               <span class="menu-icon">
                <i class="ki-filled ki-setting-3">
                </i>
               </span>
               <span class="menu-title">
                Events
               </span>
              </div>
             </div>
             <div class="menu-item">
              <div class="menu-link" href="html/demo1/account/members/import-members.html">
               <span class="menu-icon">
                <i class="ki-filled ki-some-files">
                </i>
               </span>
               <span class="menu-title">
                Notifications
               </span>
              </div>
             </div>
             <div class="menu-item">
              <div class="menu-link" href="html/demo1/account/activity.html">
               <span class="menu-icon">
                <i class="ki-filled ki-cloud-change">
                </i>
               </span>
               <span class="menu-title">
                School Policy
               </span>
              </div>
             </div>
            </div>
           </div>
          </div>
         </div>
         <div class="flex flex-col gap-3">
          <div class="text-base font-semibold leading-none text-gray-900 hover:text-primary-active" href="#">
           Notifications
          </div>
          <span class="text-2sm font-medium text-gray-600 leading-5">
           Keep updated with important notices and event reminders.
          </span>
         </div>
        </div>
       </div>
      </div>
       <div class="grid lg:grid-cols-2 gap-5 lg:gap-7.5">
        <div class="card">
         <div class="card-body px-10 py-7.5 lg:pr-12.5">
          <div class="flex flex-wrap md:flex-nowrap items-center gap-6 md:gap-10">
           <div class="flex flex-col items-start gap-3">
            <h2 class="text-1.5xl font-semibold text-gray-900">
             Questions ?
            </h2>
            <p class="text-sm font-medium text-gray-700 leading-5.5 mb-2.5">
             Visit our Help Center for detailed assistance on billing, payments, transportation and more.
            </p>
           </div>
           <img alt="image" class="dark:hidden max-h-[150px]" src="assets/edubliss/dist/media/illustrations/29.svg"/>
           <img alt="image" class="light:hidden max-h-[150px]" src="assets/edubliss/dist/media/illustrations/29-dark.svg"/>
          </div>
         </div>
         <div class="card-footer justify-center">
          <a class="btn btn-link" href="https://wa.me/+2347043257997">
          <i class="ki-filled ki-whatsapp">
          </i>
           Chat us on Whatsapp
          </a>
         </div>
        </div>
        <div class="card">
         <div class="card-body px-10 py-7.5 lg:pr-12.5">
          <div class="flex flex-wrap md:flex-nowrap items-center gap-6 md:gap-10">
           <div class="flex flex-col items-start gap-3">
            <h2 class="text-1.5xl font-semibold text-gray-900">
             Contact Support
            </h2>
            <p class="text-sm font-medium text-gray-700 leading-5.5 mb-2.5">
             Need assistance? Contact our support team for prompt, personalized help your queries &amp; concerns.
            </p>
           </div>
           <img alt="image" class="dark:hidden max-h-[150px]" src="assets/edubliss/dist/media/illustrations/31.svg"/>
           <img alt="image" class="light:hidden max-h-[150px]" src="assets/edubliss/dist/media/illustrations/31-dark.svg"/>
          </div>
         </div>
         <div class="card-footer justify-center">
          <a class="btn btn-link" href="https://mpischool.com/contact/">
           Contact Support
          </a>
         </div>
        </div>
       </div>
       </div>
     </div>
     <!-- End of Container -->

    {% elif current_user.role_profile_name == 'MPIS Student' %}
     <!-- begin: container -->
     <div class="container-fixed">
      <div class="grid gap-5 lg:gap-7.5">
       <!-- begin: grid -->
       <div class="grid lg:grid-cols-3 gap-y-5 lg:gap-7.5 items-stretch">
        <div class="lg:col-span-1">
         <div class="grid grid-cols-2 gap-5 lg:gap-7.5 h-full items-stretch">
          <div class="card flex-col justify-between gap-6 h-full bg-cover bg-[right_top_-1.7rem] bg-no-repeat channel-stats-bg">
           <img alt="" class="w-7 mt-4 ms-5" src="assets/edubliss/dist/media/images/icons/team.png"/>
           <div class="flex flex-col gap-1 pb-4 px-5">
            <a href="/students/list">
            <span class="text-3xl font-semibold text-gray-900">
             {{ student_count }}
            </span>
            <span class="text-2sm font-medium text-gray-600">
             Students
            </span>
            </a>
           </div>
          </div>
          <div class="card flex-col justify-between gap-6 h-full bg-cover bg-[right_top_-1.7rem] bg-no-repeat channel-stats-bg">
           <img alt="" class="w-7 mt-4 ms-5" src="assets/edubliss/dist/media/images/icons/user-circle.svg"/>
           <div class="flex flex-col gap-1 pb-4 px-5">
            <span class="text-3xl font-semibold text-gray-900">
             {{teacher_count}}
            </span>
            <span class="text-2sm font-medium text-gray-600">
             Teachers
            </span>
           </div>
          </div>
          <div class="card flex-col justify-between gap-6 h-full bg-cover bg-[right_top_-1.7rem] bg-no-repeat channel-stats-bg">
           <img alt="" class="w-7 mt-4 ms-5" src="assets/edubliss/dist/media/images/icons/time.png"/>
           <div class="flex flex-col gap-1 pb-4 px-5">
            <span class="text-3xl font-semibold text-gray-900">
             1
            </span>
            <span class="text-2sm font-medium text-gray-600">
             Parents
            </span>
           </div>
          </div>
          <div class="card flex-col justify-between gap-6 h-full bg-cover bg-[right_top_-1.7rem] bg-no-repeat channel-stats-bg">
           <img alt="" class="dark:hidden w-7 mt-4 ms-5" src="assets/edubliss/dist/media/images/icons/police-id.png"/>
           <img alt="" class="light:hidden w-7 mt-4 ms-5" src="assets/edubliss/dist/media/images/icons/police-id.png"/>
           <div class="flex flex-col gap-1 pb-4 px-5">
            <span class="text-3xl font-semibold text-gray-900">
             200
            </span>
            <span class="text-2sm font-medium text-gray-600">
             New Admissions
            </span>
           </div>
          </div>
         </div>
        </div>
        <div class="lg:col-span-2">
         <div class="card h-full h-full">
          <div class="card-body p-10 bg-[length:80%] [background-position:175%_25%] bg-no-repeat entry-callout-bg">
           <div class="flex flex-col justify-center gap-4">
            <div class="flex -space-x-2">
             <div id="clock" class="flex clock hover:z-5 relative"><b>00:00:00</b></div>
            </div>
            <h2 class="text-1.5xl font-semibold text-gray-900">
             Welcome to 
             <br/>
             <a class="link" href="#">
              Maryland Schools
             </a>
            </h2>
            <p class="text-sm font-medium text-gray-700 leading-5.5">
             We are proud to carry you along in our daily
             <br/>
             engagements. Enjoy the best digital 
             <br/>
              and efficient services.
            </p>
           </div>
          </div>
          <div class="card-footer justify-center">
           <a class="btn btn-link" href="/lms">
            Go to LMS
           </a>
          </div>
         </div>
        </div>
       </div>
       <!-- end: grid -->
       <!-- begin: grid -->
       <div class="grid lg:grid-cols-3 gap-5 lg:gap-7.5 items-stretch">
        <div class="lg:col-span-1">
         <div class="card h-full">
          <div class="card-header">
           <h3 class="card-title">
            Academics and LMS Overview
           </h3>
          </div>
          <div class="card-body flex flex-col gap-4 p-5 lg:p-7.5 lg:pt-4">
           <div class="grid gap-3">
            <div class="flex items-center justify-between flex-wrap gap-2">
             <div class="flex items-center gap-1.5">
              <i class="ki-filled ki-teacher text-base text-info">
              </i>
              <span class="text-sm font-medium text-gray-800">
               Classes
              </span>
             </div>
             <div class="flex items-center text-sm font-medium text-gray-800 gap-6">
              <span class="lg:text-right">
               7
              </span>
             </div>
            </div>
            <div class="flex items-center justify-between flex-wrap gap-2">
             <div class="flex items-center gap-1.5">
              <i class="ki-filled ki-clipboard text-base text-warning">
              </i>
              <span class="text-sm font-medium text-gray-800">
               Section
              </span>
             </div>
             <div class="flex items-center text-sm font-medium text-gray-800 gap-6">
              <span class="lg:text-right">
               5
              </span>
             </div>
            </div>
           <div class="border-b border-gray-300">
           </div>
            <div class="flex items-center justify-between flex-wrap gap-2">
             <div class="flex items-center gap-1.5">
              <i class="ki-filled ki-book text-base text-primary">
              </i>
              <span class="text-sm font-medium text-gray-800">
               Subjects
              </span>
             </div>
             <div class="flex items-center text-sm font-medium text-gray-800 gap-6">
              <span class="lg:text-right">
               13
              </span>
             </div>
            </div>
            <div class="flex items-center justify-between flex-wrap gap-2">
             <div class="flex items-center gap-1.5">
              <i class="ki-filled ki-note text-base text-danger">
              </i>
              <span class="text-sm font-medium text-gray-800">
               Courses
              </span>
             </div>
             <div class="flex items-center text-sm font-medium text-gray-800 gap-6">
              <span class="lg:text-right">
               {{course_count}}
              </span>
             </div>
            </div>
            <div class="flex items-center justify-between flex-wrap gap-2">
             <div class="flex items-center gap-1.5">
              <i class="ki-filled ki-award text-base text-success">
              </i>
              <span class="text-sm font-medium text-gray-800">
               Assessment
              </span>
             </div>
             <div class="flex items-center text-sm font-medium text-gray-800 gap-6">
              <span class="lg:text-right">
               20
              </span>
             </div>
            </div>
          </div>
          </div>
         </div>
        </div>
        <div class="lg:col-span-2">
         <div class="card h-full">
          <div class="card-header">
           <h3 class="card-title">
            New Admissions
           </h3>
           <div class="flex gap-5">
            <select class="select select-sm w-28" name="select">
            </select>
           </div>
          </div>
          <div class="card-body flex flex-col justify-end items-stretch grow px-3 py-1">
           <div id="earnings_chart">
           </div>
          </div>
         </div>
        </div>
       </div>
       <!-- end: grid -->
       <!-- begin: grid -->
       <div class="grid lg:grid-cols-3 gap-5 lg:gap-7.5 items-stretch">
        <div class="lg:col-span-1">
         <div class="card h-full">
         <div class="card-body px-10 py-7.5 lg:pr-12.5">
          <div class="flex flex-wrap md:flex-nowrap items-center gap-6 md:gap-10">
           <div class="flex flex-col items-start gap-3">
            <h2 class="text-1.5xl font-semibold text-gray-900">
             Contact Support
            </h2>
            <p class="text-sm font-medium text-gray-700 leading-5.5 mb-2.5">
             Need assistance? Contact our support team for prompt, personalized help your queries &amp; concerns.
            </p>
           </div>
           <img alt="image" class="dark:hidden max-h-[150px]" src="assets/edubliss/dist/media/illustrations/31.svg"/>
           <img alt="image" class="light:hidden max-h-[150px]" src="assets/edubliss/dist/media/illustrations/31-dark.svg"/>
          </div>
         </div>
         <div class="card-footer justify-center">
          <a class="btn btn-link" href="/issues">
           Contact Support
          </a>
         </div>
        </div>
        </div>
        <div class="lg:col-span-2">
         <div class="grid">
         <div class="card card-grid min-w-full">
          <div class="card-header py-5 flex-wrap">
           <h3 class="card-title">
            Students
           </h3>
          </div>
          <div class="card-body">
           <div data-datatable="true" data-datatable-page-size="5">
            <div class="scrollable-x-auto">
             <table class="table table-auto table-border" data-datatable-table="true">
              <thead>
               <tr>
                <th class="min-w-[250px]">
                 <span class="sort asc">
                  <span class="sort-label">
                   Student Name
                  </span>
                  <span class="sort-icon">
                  </span>
                 </span>
                </th>
                <th class="min-w-[120px]">
                 <span class="sort">
                  <span class="sort-label">
                   Student ID
                  </span>
                  <span class="sort-icon">
                  </span>
                 </span>
                </th>
                <th class="min-w-[120px]">
                 <span class="sort">
                  <span class="sort-label">
                   Status
                  </span>
                  <span class="sort-icon">
                  </span>
                 </span>
                </th>
                <th class="min-w-[160px]">
                 <span class="sort">
                  <span class="sort-label">
                   Joined Date
                  </span>
                  <span class="sort-icon">
                  </span>
                 </span>
                </th>
               </tr>
              </thead>
              <tbody>
                {% for student in students %}
               <tr>
                <td>
                 <div class="flex items-center gap-2.5">
                  <div class="">
                   <img class="h-9 rounded-full" src="{% if student.image  %}{{student.image}}{% else %}assets/edubliss/dist/media/avatars/blank.png{% endif %}"/>
                  </div>
                  <div class="flex flex-col gap-0.5">
                   <a class="leading-none font-semibold text-sm text-gray-900 hover:text-primary" href="/students/profile/{{ student.name }}">
                    {{ student.student_name }}
                   <span class="text-2sm font-medium text-gray-600 hover:text-primary-active">
                    {{ student.student_email_id }}
                   </span>
                   </a>
                  </div>
                 </div>
                </td>
                <td>
                 <div class="flex items-center gap-1.5">
                  <span class="leading-none text-gray-700">
                   {{ student.name }}
                  </span>
                 </div>
                </td>
                <td>
                  {% if student.enabled == 1 %}
                 <span class="badge badge-pill badge-outline badge-success gap-1 items-center">
                  <span class="badge badge-dot size-1.5 badge-success">
                  </span>
                    Active
                 </span>
                  {% else %}
                 <span class="badge badge-pill badge-outline badge-danger gap-1 items-center">
                  <span class="badge badge-dot size-1.5 badge-danger">
                  </span>
                    Disabled
                 </span>
                  {% endif %}
                </td>
                <td>
                 {{ student.joining_date }}
                </td>
               </tr>
               {% endfor %}
              </tbody>
             </table>
            </div>
            <div class="card-footer justify-center md:justify-between flex-col md:flex-row gap-5 text-gray-600 text-2sm font-medium">
             <div class="flex items-center gap-2 order-2 md:order-1">
              Show
              <select class="select select-sm w-16" data-datatable-size="true" name="perpage1">
              </select>
              per page
             </div>
             <div class="flex items-center gap-4 order-1 md:order-2">
              <span data-datatable-info="true">
              </span>
              <div class="pagination" data-datatable-pagination="true">
              </div>
             </div>
            </div>
           </div>
          </div>
         </div>
        </div>
        </div>
       </div>
       <!-- end: grid -->
       <!-- begin: grid -->
       <div class="card card-grid min-w-full">
        <div class="card-header">
         <h3 class="card-title">
          Billing and Invoicing
         </h3>
        </div>
        <div class="card-body">
         <div data-datatable="true" data-datatable-page-size="10">
          <div class="scrollable-x-auto">
           <table class="table table-border" data-datatable-table="true">
            <thead>
             <tr>
              <th class="min-w-[200px]">
               <span class="sort">
                <span class="sort-label">
                 Title
                </span>
                <span class="sort-icon">
                </span>
               </span>
              </th>
              <th class="w-[170px]">
               <span class="sort">
                <span class="sort-label">
                 Status
                </span>
                <span class="sort-icon">
                </span>
               </span>
              </th>
              <th class="w-[170px]">
               <span class="sort">
                <span class="sort-label">
                 Date
                </span>
                <span class="sort-icon">
                </span>
               </span>
              </th>
              <th class="w-[170px]">
               <span class="sort">
                <span class="sort-label">
                 Grand Total
                </span>
                <span class="sort-icon">
                </span>
               </span>
              </th>
              <th class="w-[170px]">
               <span class="sort">
                <span class="sort-label">
                 Outstanding
                </span>
                <span class="sort-icon">
                </span>
               </span>
              </th>
              <th class="w-[100px]">
              </th>
             </tr>
            </thead>
            <tbody>
            {% for invoice in sales_invoices %}
             <tr>
              <td>
               <a class="leading-none font-semibold text-sm text-gray-900 hover:text-primary" href="#">        
               {{ invoice.title }}
               </a>
              </td>
              <td>
               {% if invoice.status == 'Draft' %}
               <div class="badge badge-sm badge-info badge-outline">
                {% elif invoice.status == 'Overdue' %}
               <div class="badge badge-sm badge-danger badge-outline">
                {% elif invoice.status == 'Cancelled' %}
               <div class="badge badge-sm badge-danger badge-outline">
                {% elif invoice.status == 'Unpaid' %}
               <div class="badge badge-sm badge-warning badge-outline">
                {% elif invoice.status == 'Partly Paid' %}
               <div class="badge badge-sm badge-warning badge-outline">
                {% elif invoice.status == 'Paid' %}
               <div class="badge badge-sm badge-success badge-outline">
                {% elif invoice.status == 'Return' %}
               <div class="badge badge-sm badge-dark badge-outline">
                {% else %}
               <div class="badge badge-sm badge-primary badge-outline">
                {% endif %}
                {{ invoice.status }}
               </div>
              </td>
              <td>
               {{ invoice.posting_date }}
              </td>
              <td>
               {{ frappe.format(invoice.grand_total, {'fieldtype': 'Currency'}) }}
              </td>
              <td>
               {{ frappe.format(invoice.outstanding_amount, {'fieldtype': 'Currency'}) }}
              </td>
              <td class="text-center">
               <a class="btn btn-link" href="/printview?doctype=Sales%20Invoice&name={{ invoice.name }}">
                {{ invoice.name }}
               </a>
              </td>
             </tr>
             {% endfor %}
            </tbody>
           </table>
          </div>
          <div class="card-footer justify-center md:justify-between flex-col md:flex-row gap-5 text-gray-600 text-2sm font-medium">
           <div class="flex items-center gap-2 order-2 md:order-1">
            Show
            <select class="select select-sm w-16" data-datatable-size="true" name="perpage2">
            </select>
            per page
           </div>
           <div class="flex items-center gap-4 order-1 md:order-2">
            <span data-datatable-info="true">
            </span>
            <div class="pagination" data-datatable-pagination="true">
            </div>
           </div>
          </div>
         </div>
        </div>
       </div>
       <!-- end: grid -->
      </div>
     </div>
     <!-- end: container -->
    {% else %}
     <!-- begin: container -->
     <div class="container-fixed">
     </div>
     <!-- end: container -->
    {% endif %}

    </main>

    <script>
        function updateClock() {
            const clock = document.getElementById('clock');
            const now = new Date();
            const hours = String(now.getHours()).padStart(2, '0');
            const minutes = String(now.getMinutes()).padStart(2, '0');
            const seconds = String(now.getSeconds()).padStart(2, '0');
            clock.textContent = `${hours}:${minutes}:${seconds}`;
        }

        setInterval(updateClock, 1000);
        updateClock();
    </script>
{% endblock %}

{% block welcome_link %}
{% include "templates/includes/welcome.html" %}
{% endblock %}
