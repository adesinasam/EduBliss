<style>
		@media screen {
		.print-format-gutter {
			background-color: #ddd;
			padding: 15px 0px;
		}
		.print-format {
			background-color: white;
			box-shadow: 0px 0px 9px rgba(0,0,0,0.5);
			max-width: 8.3in;
			min-height: 11.69in;
			padding: 0.75in;
			margin: auto;
		}

		.print-format.landscape {
			max-width: 11.69in;
			padding: 0.2in;
		}

		.page-break {
			padding: 30px 0px;
			border-bottom: 1px dashed #888;
		}

		.page-break:first-child {
			padding-top: 0px;
		}

		.page-break:last-child {
			border-bottom: 0px;
		}

		/* mozilla hack for images in table */
		body:last-child .print-format td img {
			width: 100% !important;
		}

		@media(max-width: 767px) {
			.print-format {
				padding: 0.2in;
			}
		}
	}

	@media print {
		.print-format p {
			margin-left: 1px;
			margin-right: 1px;
		}
	}

	.data-field {
		margin-top: 5px;
		margin-bottom: 5px;
	}

	.data-field .value {
		word-wrap: break-word;
	}

	.important .value {
		font-size: 120%;
		font-weight: bold;
	}

	.important label {
		line-height: 1.8;
		margin: 0px;
	}

	.table {
		margin: 20px 0px;
	}

	.square-image {
		width: 100%;
		height: 0;
		padding: 50% 0;
		background-size: contain;
		/*background-size: cover;*/
		background-repeat: no-repeat !important;
		background-position: center center;
		border-radius: 4px;
	}

	.print-item-image {
		object-fit: contain;
	}

	.pdf-variables,
	.pdf-variable,
	.visible-pdf {
		display: none !important;
	}

	.print-format {
		font-size: 8pt;
		font-family: "Helvetica Neue", Helvetica, Arial, "Open Sans", sans-serif;
		-webkit-print-color-adjust:exact;
	}

	.page-break {
		page-break-after: always;
	}

	table.no-border, table.no-border td {
		border: 0px;
	}

	.print-format label {
		/* wkhtmltopdf breaks label into multiple lines when it is inline-block */
		display: block;
	}

	.print-format img {
		max-width: 100%;
	}

	.print-format table td > .primary:first-child {
		font-weight: bold;
	}

	.print-format td, .print-format th {
		vertical-align: top !important;
		padding: 3px !important;
	}

	.print-format p {
		margin: 3px 0px 3px;
	}

	table td div {

		/* needed to avoid partial cutting of text between page break in wkhtmltopdf */
		page-break-inside: avoid !important;

	}

	/* hack for webkit specific browser */
	@media (-webkit-min-device-pixel-ratio:0) {
		thead, tfoot { display: table-row-group; }
	}

	[document-status] {
		margin-bottom: 5mm;
	}

	.signature-img {
		background: #fff;
		border-radius: 3px;
		margin-top: 5px;
		max-height: 150px;
	}

	.print-heading {
		text-align: right;
		text-transform: uppercase;
		color: #666;
		padding-bottom: 20px;
		margin-bottom: 20px;
		border-bottom: 1px solid #d1d8dd;
	}

	.print-heading h2 {
		font-size: 24px;
	}

	.print-format th {
		background-color: #eee !important;
		border-bottom: 0px !important;
	}

	/* modern format: for-test */

	.pbi_avoid {
		page-break-inside: avoid !important;
	}

	.pb_before {
		page-break-before: always !important;
	}

	.pdf-header {
		display: inline-block;
	}

	.text-warning {
    	color: #ffcc00; /* or any warning color you prefer */
	}

  	.performance-title {
    	color: #1d4ed8 !important;
    	text-align: center;
  	}

</style>


<table width="100%" style="margin-top: 0; margin-bottom: 0; padding: 0;">
    <tbody>
        <tr>
            <td style="width: 11%; border: 0">
                <div align="left"><img src="/files/Super Logo New.png"></div>
            </td>
            <td style="width: 76%; border: 0">
				<div class="text-center">
				    <h3><b class="text-yellow-500">{{ program.custom_school | upper }}</b><small>
				    {% set u = frappe.get_doc("Company", program.custom_school) %}
				    <p>{{ frappe.db.get_value("Address", u.custom_default_address, "address_line1") or "" }}, {{ frappe.db.get_value("Address", u.custom_default_address, "city") or "" }}, {{ frappe.db.get_value("Address", u.custom_default_address, "state") or "" }}</p>
				    <p>Tel: {{ frappe.db.get_value("Address", u.custom_default_address, "phone") or "" }} | Email: enquiries@mpischool.com | Web: www.mpischool.com</p></small></h3>
				    <h4><b>CONTINUOUS ASSESSMENT REPORT SHEET</b></h4>
				</div>
            </td>
            <td style="width: 13%; border: 0">
                <div align="right"><img src="{{ students.image }}"></div>
            </td>
        </tr>
    </tbody>
</table>
<table class="table table-bordered" width="100%"  style="margin-top: 0; margin-bottom: 0; padding: 0;">
    <tr>
        <td><b>Name:<span class="text-primary"> {{ doc.student_name | upper }}</span></b></td>
        <td><b>ID:<span class="text-primary"> {{ doc.students[0] }}</span></b></td>
        <td><b>Class:<span class="text-primary"> {{ doc.program }}</span></b></td>
    </tr>
    <tr>
        <td><b>Session:<span class="text-primary"> {{ doc.academic_year }}</span></b></td>
        <td><b>Term:<span class="text-primary"> {{ term.term_name }}</span></b></td>
        <td><b>Arm:<span class="text-primary"> {{ sections}}</span></b></td>
    </tr>
    <tr>
        <td><b>Class Teacher:<span class="text-primary"> {% for instructor in instructor %}{{ instructor.instructor | upper or ""}}{% endfor %}</span></b></td>
        <td><b>Attendance:<span class="text-primary"> {{ doc.attendance.present if doc.attendance.present else 0 }} out of {{ doc.attendance.total }}  {{ _(" days") }}</span></b></td>
        <td><b>Date of Birth:<span class="text-primary"> {{ format_date(students.date_of_birth) or "" }}</span></b></td>
    </tr>
</table>

<h6 class="performance-title"><b>PERFORMANCE IN SUBJECTS</b></h6>
<table class="table table-bordered" width="100%"  style="margin-top: 0; margin-bottom: 0; padding: 0;">
    <thead>
        <tr>
        	<th width="3%"><span>SN</span></th>
	        <th width="20%"><span>Subject</span></th>
    	    <th width="5%"><span>CA1</span></th>
        	<th width="5%"><span>CA2</span></th>
	        <th width="5%"><span>CA3</span></th>
    	    <!-- <th width="5%"><span>CA4</span></th>
        	<th width="5%"><span>CA5</span></th>
	        <th width="5%"><span>CA6</span></th> -->
    	    <th width="5%"><span>Exam</span></th>
        	<th width="5%"><span>Total</span></th>
        	<th width="5%"><span>Class Avg.</span></th>
	        <th width="5%"><span>Grade</span></th>
    	    <th width="10%"><span>Remark</span></th>
        	<th width="10%"><span>Subject Teacher</span></th>
        </tr>
    </thead>
    <tbody>
     {% if assessment_result %}	
      {% for result in assessment_result %}
       {% if get_course_subject(result.course) != 'Others' %}
        <tr>
            <td>{{ loop.index}}</td>
            <td>{{ get_course_subject(result.course) | upper }}</td>
			{% for criteria in get_criteria_marks(result.name) %}
            <td>{{ criteria.score | round(1) }}</td>
			{% endfor %}
            <td>{{ result.total_score | round(2) }}</td>
            <td>97</td>
            <td>{{ result.grade }}</td>
            <td>{{ get_grade_remark(result.grading_scale, result.total_score) }}</td>
            <td>{{ get_course_teacher(result.course, result.student_group, result.academic_term) }}</td>
        </tr>
       {% endif %}
      {% endfor %}
     {% else %}  
        <tr>
            <td colspan="10" class="text-center">No student found.</td>
        </tr>
     {% endif %}  
    </tbody>
</table>

<table width="100%" style="margin-top: 0; margin-bottom: 0; padding: 2; border: 0;">
    <tr>
        <td width="30%"><p><b>Number of Subjects Offered: {{ course_count }}</b></p></td>
        <td width="45%" class="text-center" colspan="2"><p><b>Total Score: {{ total_score | round(1) }}</b></p></td>
        <td width="25%"><p><b>Final Average: {{ average | round(2) }}</b></p></td>
    </tr>
    <!-- <tr>
        <td width="30%"><p><b>Position in Arm: 10</b></p></td>
        <td width="20%"><p><b>No. in Arm: {{ section_count }}</b></p></td>
        <td width="25%"><p><b>Position in Class: 11</b></p></td>
        <td width="25%"><p><b>No. in Class: {{ program_count }}</b></p></td>
    </tr> -->
</table>

<div style="margin-top: 0px;">
<p><b class="text-primary left">INTERPRETATION: 95-100= Outstanding, 90-94= Excellent, 85-89= Proficient, 80-84= V.Good, 75-79= Good, 70-74= Satisfactory, 0-69= Fair<hr></b></p>
</div>

<table width="100%" style="margin-top: 0; margin-bottom: 0; padding: 0;">
    <tbody>
        <tr>
            <td style="width: 48%; border: 0">

<table class="table table-bordered" width="100%" style="margin-top: 0; margin-bottom: 0; padding: 0;">
    <thead style="background-color: #007bff; color: white;">
        <tr>
            <th><b>AFFECTIVE ASSESSMENT</b></th>
            <th>Score</th>
            <th>Grade</th>
        </tr>
    </thead>
    <tbody>
     {% if assessment_result %}	
      {% for result in assessment_result %}
       {% if result.course == 'AFFECTIVE ASSESSMENT' %}
        <tr>
			{% for criteria in result.custom_structure_detail %}
            <td>{{ criteria.assessment_type }}</td>
            <td>{{ criteria.score }}</td>
            <td>{{ criteria.grade }}</td>
			{% endfor %}
        </tr>
       {% endif %}
      {% endfor %}
     {% endif %}  
    </tbody>
</table>

            </td>
            <td style="width: 4%; border: 0">
            </td>
            <td style="width: 48%; border: 0">

<table class="table table-bordered" width="100%" style="margin-top: 0; margin-bottom: 0; padding: 0;">
    <thead>
        <tr>
            <th><b>PSYCHOMOTOR ASSESSMENT</b></th>
            <th>Score</th>
            <th>Grade</th>
        </tr>
    </thead>
    <tbody>
     {% if assessment_result %}	
      {% for result in assessment_result %}
       {% if result.course == 'PSYCHOMOTOR ASSESSMENT' %}
        <tr>
			{% for criteria in result.custom_structure_detail %}
            <td>{{ criteria.assessment_type }}</td>
            <td>{{ criteria.score }}</td>
            <td>{{ criteria.grade }}</td>
			{% endfor %}
        </tr>
       {% endif %}
      {% endfor %}
     {% endif %}  
    </tbody>
</table>
            </td>
        </tr>
    </tbody>
</table>
<div style="margin-top: 0px;">
<p><b class="text-primary left">INTERPRETATION: 4.5-5= EXCELLENT , 3.5-4= VERY GOOD , 2.5-3= GOOD , 1.5-2= FAIR , 0-1= POOR<hr></b></p>
</div>

<h6 class="performance-title"><b>COMMENTS</b></h6>
<table class="table table-bordered" width="100%" style="margin-top: 0; margin-bottom: 0; padding: 2;">
    <tr>
        <td width="25%" style="margin-top: 30px;"><p><b>CLASS TEACHER'S COMMENT</b></p></td>
        <td width="75%" style="margin-top: 30px;"><p> </p></td>
    </tr>
    <tr>
        <td width="25%" style="margin-top: 30px;"><p><b>CLASS TEACHER'S NAME AND SIGNATURE</b></p></td>
        <td width="75%" style="margin-top: 30px;"><p> </p></td>
    </tr>
    <tr>
        <td width="25%" style="margin-top: 30px;"><p><b>HEAD TEACHER'S COMMENT</b></p></td>
        <td width="75%" style="margin-top: 30px;"><p> </p></td>
    </tr>
    <tr>
        <td width="25%" style="margin-top: 30px;"><p><b>HEAD TEACHER'S NAME AND SIGNATURE</b></p></td>
        <td width="75%" style="margin-top: 30px;"><p> </p></td>
    </tr>
</table>

